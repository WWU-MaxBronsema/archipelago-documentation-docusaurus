<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-archipelago-deployment-live-moveToLive">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Moving from archipelago-deployment to archipelago-deployment-live | Archipelago Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://wwu-maxbronsema.github.io/archipelago-documentation-docusaurus/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://wwu-maxbronsema.github.io/archipelago-documentation-docusaurus/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://wwu-maxbronsema.github.io/archipelago-documentation-docusaurus/docs/archipelago-deployment-live-moveToLive"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Moving from archipelago-deployment to archipelago-deployment-live | Archipelago Documentation"><meta data-rh="true" name="description" content="What is this documentation for?"><meta data-rh="true" property="og:description" content="What is this documentation for?"><link data-rh="true" rel="icon" href="/archipelago-documentation-docusaurus/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://wwu-maxbronsema.github.io/archipelago-documentation-docusaurus/docs/archipelago-deployment-live-moveToLive"><link data-rh="true" rel="alternate" href="https://wwu-maxbronsema.github.io/archipelago-documentation-docusaurus/docs/archipelago-deployment-live-moveToLive" hreflang="en"><link data-rh="true" rel="alternate" href="https://wwu-maxbronsema.github.io/archipelago-documentation-docusaurus/docs/archipelago-deployment-live-moveToLive" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/archipelago-documentation-docusaurus/blog/rss.xml" title="Archipelago Documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/archipelago-documentation-docusaurus/blog/atom.xml" title="Archipelago Documentation Atom Feed"><link rel="stylesheet" href="/archipelago-documentation-docusaurus/assets/css/styles.d03fc8fd.css">
<link rel="preload" href="/archipelago-documentation-docusaurus/assets/js/runtime~main.3a9b1af4.js" as="script">
<link rel="preload" href="/archipelago-documentation-docusaurus/assets/js/main.df94142f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/archipelago-documentation-docusaurus/"><div class="navbar__logo"><img src="/archipelago-documentation-docusaurus/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/archipelago-documentation-docusaurus/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Archipelao Documentation</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/archipelago-documentation-docusaurus/docs/AMIviaSpreadsheets">Tutorial</a><a class="navbar__item navbar__link" href="/archipelago-documentation-docusaurus/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/AMIviaSpreadsheets">Ingesting New Digital Objects and Collections using Spreadsheets or Google Sheets</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/CODE_OF_CONDUCT">Archipelago - code of conduct / anti-harassment policy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/I7solrImporter">Using the Islandora 7 Solr Importer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/about">About this Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/acknowledgments">Caring &amp; Coding + Fixing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/ami_index">Archipelago Multi-Importer (AMI)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/ami_lod_rec">Using AMI&#x27;s Linked Data Reconciliation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/ami_spreadsheet_overview">Spreadsheet Formatting Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/annotations">Annotations in Archipelago</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/archifilepersistencestrategy">Archipelago&#x27;s File Persistence Strategy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/archipelago-deployment-democontent">Adding Demo Archipelago Digital Objects (ADOs) to your Repository</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/archipelago-deployment-live-gitworkflow">Managing, sheltering, pruning, and nurturing your own custom Archipelago</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/archipelago-documentation-docusaurus/docs/archipelago-deployment-live-moveToLive">Moving from archipelago-deployment to archipelago-deployment-live</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/archipelago-deployment-live-readme">Archipelago-deployment-live</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/archipelago-deployment-live-updatingContainers">Updating containers in an Archipelago-deployment-live instance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/archipelago-deployment-live-upgradeFromD8ToD9">Archipelago-deployment-live: upgrading Drupal 8 to Drupal 9 (1.0.0-RC2 to 1.0.0-RC3)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/archipelago-deployment-live-upgradeFromRC3">Archipelago-deployment-live: upgrading to 1.0.0 (1.0.0-RC3 to 1.0.0)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/archipelago-deployment-osx">Installing Archipelago Drupal 9 on OSX (macOS)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/archipelago-deployment-readme">Archipelago-deployment for Drupal 9</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/archipelago-deployment-ubuntu">Installing Archipelago Drupal 9 on Ubuntu 18.04 or 20.04</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/archipelago-deployment-upgradeFromD8ToD9">Archipelago-deployment: upgrading Drupal 8 to Drupal 9 (1.0.0-RC2 to 1.0.0-RC3)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/archipelago-deployment-upgradeFromRC3">Archipelago-deployment: upgrading to 1.0.0 (1.0.0-RC3 to 1.0.0)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/archipelago-deployment-windows">Installing Archipelago Drupal 9 on Ubuntu 18.04 or 20.04</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/communityshowcase">Archipelago Community</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/createdisplaymodes">Creating Display Modes for Archipelago Digital Objects</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/customwebformelements">Archipelago Custom Webform Elements</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/devops">Archipelago Software Services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/documentation_about">About This Documentation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/documentation_features">Additional Documentation Features</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/documentation_technical">Documentation Technical Details</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/documentation_template">Example Documentation Page Title</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/documentation_workflow">GitHub Workflow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/firstobject">Your First Digital Object</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/generalqa_index">General Q&amp;A</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/generalqa_minio_logging">Min.io Logging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/generalqa_smtp_configuration">SMTP Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/generalqa_twig_modules_configuration">Twig Modules Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/giveortake">Archipelago Contribution Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/googleapi">Configuration for Google Sheets API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/">Archipelago Commons Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/inthewild">Archipelagos in the Wild</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/metadatatwigs">Twig Templates and Archipelago</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/modifyingfileextensionsinwebform">Customizing Webforms: Modifying allowable file extensions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/ourtake">Archipelago&#x27;s Philosophy &amp; Guiding Principles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/presentations_docs">Archipelago Presentations and Documents</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/sslsetup">How to Setup SSL for Docker/Archipelago</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/strawberryfield-formatters">Strawberryfield Formatters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/strawberryfields">Strawberryfields Forever</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/tbd">Documentation Update Needed</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/traditional-install">traditional-install</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/webforms">webforms</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/webformsasinput">Webforms as input method for Archipelago Digital Objects (ADO)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/workingtwigs">Working with Twig in Archipelago</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/archipelago-documentation-docusaurus/docs/xdebug">Debugging PHP in Archipelago</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/archipelago-documentation-docusaurus/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Moving from archipelago-deployment to archipelago-deployment-live</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Moving from <code>archipelago-deployment</code> to <code>archipelago-deployment-live</code></h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-this-documentation-for">What is this documentation for?<a href="#what-is-this-documentation-for" class="hash-link" aria-label="Direct link to What is this documentation for?" title="Direct link to What is this documentation for?">​</a></h2><p>If you have been using/running/populating an instance with Archipelago Digital Objects that was set up using our simpler-to-deploy but harder-to-customize <a href="https://github.com/esmero/archipelago-deployment" target="_blank" rel="noopener noreferrer">archipelago-deployment</a> strategy and can&#x27;t wait to move to this one—meant for a larger (and somehow easier to maintain and upgrade on the long run) instance—but (wait!) you do not want to ingest again, set up again, configure users, etc. (You already did that!), this is your documentation.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-this-documentation-not-for">What is this documentation not for?<a href="#what-is-this-documentation-not-for" class="hash-link" aria-label="Direct link to What is this documentation not for?" title="Direct link to What is this documentation not for?">​</a></h2><p>To install an <code>archipelago-deployment-live</code> from scratch or to keep (forever) syncing between the two deployment options in a quantum phase shifting eternum like a time crystal.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a href="#requirements" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">​</a></h2><ul><li>An instance of Archipelago (working, tested) installed using <code>archipelago-deployment</code> as a basis.</li><li>Basic knowledge and instincts on how to run Terminal Commands, copy files, run <code>composer</code>, <code>drush</code>, Linux Permissions, and <code>git</code> of course.</li><li>Patience. You can&#x27;t skip steps here. Also, Patience again since you may have stretched (good) your current instance to do way more than we thought it could.</li><li>Time to read the main Documentation of this Repo to have a basic knowledge of how this is deployed. Recommended even if you are not going to deploy one from scratch here.</li><li>For Shell Commands documented here please copy line by line—not the whole block.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="differences-between-both-deployments-strategies">Differences between both deployments strategies.<a href="#differences-between-both-deployments-strategies" class="hash-link" aria-label="Direct link to Differences between both deployments strategies." title="Direct link to Differences between both deployments strategies.">​</a></h2><p>In a nutshell: <code>archipelago-deployment-live</code> uses a different folder structure moving configuration storage, data storage outside of your webroot, and allows a much finer control of your settings (safer) and Docker containers.
In a nutshell inside the first nutshell: <code>archipelago-deployment-live</code> also ignores more files so keeping customized versions, your own packages, your own settings around, and version controlled is much easier.
Lastly: <code>archipelago-deployment-live</code> makes more use of Cloud Services, e.g. so if you have been running <code>min.io</code> as local mounted storage you may now consider moving storage (files) to a cloud service like AWS S3.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="commonalities-between-both-deployment-strategies">Commonalities between both deployment strategies.<a href="#commonalities-between-both-deployment-strategies" class="hash-link" aria-label="Direct link to Commonalities between both deployment strategies." title="Direct link to Commonalities between both deployment strategies.">​</a></h2><p>In a nutshell: Since both run the same code and use the same Docker Containers, the data is actually the same. Everything is just persisted in different places.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-the-new-repo-in-place">Getting the new repo in place<a href="#getting-the-new-repo-in-place" class="hash-link" aria-label="Direct link to Getting the new repo in place" title="Direct link to Getting the new repo in place">​</a></h2><p>First you need to clone this repository and (hopefully) store in the same parent folder to your current <code>archipelago-deployment</code> one. For the purpose of this tutorial we will assume you have <code>archipelago-deployment</code> cloned in this location: <code>$HOME/archipelago-deployment</code>.</p><p>Locate your <code>archipelago-deployment</code> folder in your terminal. Do an <code>ls</code> to make sure you can see the folder (not the content) and run:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> clone https://github.com/esmero/archipelago-deployment-live</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> archipelago-deployment-live</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">git</span><span class="token plain"> checkout </span><span class="token number" style="color:#36acaa">1.0</span><span class="token plain">.0-RC3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">cd</span><span class="token plain"> archipelago-deployment</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now you have side by side <code>$HOME/archipelago_deployment</code> and <code>$HOME/archipelago-deployment-live</code>.</p><p>This will give you the base structure.</p><p>Before touching anything let&#x27;s start by generating a backup of your current deployment (safety first).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="backing-up">Backing up<a href="#backing-up" class="hash-link" aria-label="Direct link to Backing up" title="Direct link to Backing up">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-1">Step 1:<a href="#step-1" class="hash-link" aria-label="Direct link to Step 1:" title="Direct link to Step 1:">​</a></h3><p>Shut down your <code>docker-compose</code> ensemble. Inside your original <code>archipelago-deployment</code> folder run this:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> down</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-2">Step 2:<a href="#step-2" class="hash-link" aria-label="Direct link to Step 2:" title="Direct link to Step 2:">​</a></h3><p>Verify all containers are actually down:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ps</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The following command should return an empty listing. If anything is still running, wait a little longer and run the previous command again.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="step-3">Step 3:<a href="#step-3" class="hash-link" aria-label="Direct link to Step 3:" title="Direct link to Step 3:">​</a></h3><p>Now let&#x27;s tar.gz the whole ensemble with data and configs. As an example we will save this into your <code>$HOME</code> folder.
As a good practice we append the <strong>current date</strong> (YEAR-MONTH-DAY) to the filename. Here we assume today is December 1st of 2021:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> -czvpf </span><span class="token environment constant" style="color:#36acaa">$HOME</span><span class="token plain">/archipelago-deployment-backup-20211201.tar.gz </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/archipelago-deployment</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The process may take a few minutes. Now let&#x27;s verify that all is there and that the <code>tar.gz</code> is not corrupt:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">tar</span><span class="token plain"> -tvvf </span><span class="token environment constant" style="color:#36acaa">$HOME</span><span class="token plain">/archipelago-deployment-backup-20211201.tar.gz </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You will see a listing of files. If corrupt (do you have enough space? did your ssh connection drop?) you will see:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tar: Unrecognized archive </span><span class="token function" style="color:#d73a49">format</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Done! If you are running a public instance we can allow ourselves to start Docker again to avoid downtime:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> up -d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-directory-structures">The directory structures<a href="#the-directory-structures" class="hash-link" aria-label="Direct link to The directory structures" title="Direct link to The directory structures">​</a></h2><p>Now that you backed all up we can spend some minutes looking at both directory structures.</p><p>If you observe both deployment strategies side by side you will inmediately notice the most important similarities and also differences:</p><table><tr><th>archipelago-deployment Live</th><th>archipelago-deployment</th></tr><tr><td valign="top"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">. ├── config_storage │   ├── iiifconfig │   ├── nginxconfig │   ├── nginxconfig_selfcert │   ├── php-fpm │   └── solrconfig ├── data_storage │   ├── db │   ├── iiifcache │   ├── iiiftmp │   ├── letsencrypt │   ├── minio-data │   ├── ngnixcache │   ├── selfcert │   ├── solrcore │   └── solrlib ├── deploy │   ├── azure-kubernetes │   ├── ec2-docker │   └── kubernetes ├── docs └── drupal │   ├── config │   ├── d8content │   ├── docs │   ├── drush │   ├── patches │   ├── persistent │   ├── private │   ├── scripts │   ├── vendor │   ├── web │   └── xdebug</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></td><td valign="top"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">. ├── config │   └── sync ├── d8content │   └── metadatadisplays ├── docs ├── drush │   ├── Commands │   └── sites ├── nginxconfigford8 ├── patches ├── persistent │   ├── db │   ├── iiifcache │   ├── iiifconfig │   ├── miniodata │   ├── solrconfig │   ├── solrcore │   └── solrlib ├── private │   └── webform ├── scripts │   ├── archipelago │   └── composer ├── vendor │   ├── archipelago │   ├── asm89 │   ├── aws │   ├── behat │   ├── bin │   ├── brick │   ├── chi-teck │   ├── composer │   ├── consolidation │   ├── container-interop │   ├── cweagans │   ├── data-values │   ├── dflydev │   ├── doctrine │   ├── drupal │   ├── drush │   ├── easyrdf │   ├── egulias │   ├── enlightn │   ├── erusev │   ├── evenement │   ├── ezyang │   ├── fabpot │   ├── fileeye │   ├── firebase │   ├── frictionlessdata │   ├── google │   ├── graham-campbell │   ├── grasmash │   ├── guzzlehttp │   ├── instaclick │   ├── jcalderonzumba │   ├── jean85 │   ├── jmikola │   ├── justinrainbow │   ├── laminas │   ├── league │   ├── lsolesen │   ├── maennchen │   ├── markbaker │   ├── masterminds │   ├── mglaman │   ├── mhor │   ├── mikey179 │   ├── mixnode │   ├── ml │   ├── monolog │   ├── mtdowling │   ├── myclabs │   ├── nesbot │   ├── nette │   ├── nikic │   ├── paragonie │   ├── pear │   ├── phar-io │   ├── phenx │   ├── phpdocumentor │   ├── phplang │   ├── phpmailer │   ├── phpoffice │   ├── phpoption │   ├── phpseclib │   ├── phpspec │   ├── phpstan │   ├── phpunit │   ├── professional-wiki │   ├── psr │   ├── psy │   ├── ralouphie │   ├── ramsey │   ├── react │   ├── sebastian │   ├── seld │   ├── sirbrillig │   ├── solarium │   ├── squizlabs │   ├── stack │   ├── strawberryfield │   ├── swaggest │   ├── symfony │   ├── symfony-cmf │   ├── theseer │   ├── twbs │   ├── twig │   ├── typo3 │   ├── vlucas │   ├── web64 │   ├── webflo │   ├── webmozart │   ├── wikibase │   ├── wikimedia │   └── zaporylie ├── web │   ├── core │   ├── libraries │   ├── modules │   ├── profiles │   ├── sites │   └── themes</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></td></tr></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-data">The Data<a href="#the-data" class="hash-link" aria-label="Direct link to The Data" title="Direct link to The Data">​</a></h2><p>Let&#x27;s start by focusing on the <code>data</code>, in our case the Database, Solr, and File (S3 + Private) storage. Collapsing here a few folders will make this easier to read.
Marked with a <code>*</code> are matching folders that contain DB, Solr Core, the S3 min.io data (if you are using local storage) and also Drupal&#x27;s very own <code>private</code> folder:</p><table><tr><th>archipelago-deployment Live</th><th>archipelago-deployment</th></tr><tr><td valign="top"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">. ├── config_storage ├── data_storage │   ├── * db * │   ├── iiifcache │   ├── iiiftmp │   ├── letsencrypt │   ├── * minio-data * │   ├── ngnixcache │   ├── selfcert │   ├── solrcore │   └── solrlib ├── deploy ├── docs └── drupal │   ├── config │   ├── d8content │   ├── docs │   ├── drush │   ├── patches │   ├── persistent │   ├── * private * │   ├── scripts │   ├── vendor │   ├── web │   └── xdebug</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></td><td valign="top"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">. ├── config ├── d8content ├── docs ├── drush ├── nginxconfigford8 ├── patches ├── persistent │   ├── * db * │   ├── iiifcache │   ├── iiifconfig │   ├── * miniodata * │   ├── solrconfig │   ├── * solrcore * │   └── solrlib ├── * private * ├── scripts ├── vendor ├── web</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></td></tr></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="copying-the-data-into-the-new-structure">Copying the Data into the new Structure<a href="#copying-the-data-into-the-new-structure" class="hash-link" aria-label="Direct link to Copying the Data into the new Structure" title="Direct link to Copying the Data into the new Structure">​</a></h3><p>To do so we need to stop Docker again. This is needed because Databases sometimes keep an open Change Log and Locks in place, and if there is any interaction or cron running, your data may end up corrupted.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-1">Step 1:<a href="#step-1-1" class="hash-link" aria-label="Direct link to Step 1:" title="Direct link to Step 1:">​</a></h4><p>Shut down your <code>docker-compose</code> ensemble. Inside your original <code>archipelago-deployment</code> folder run this:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> down</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-2-1">Step 2:<a href="#step-2-1" class="hash-link" aria-label="Direct link to Step 2:" title="Direct link to Step 2:">​</a></h4><p>Verify all containers are actually down:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ps</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-3-1">Step 3:<a href="#step-3-1" class="hash-link" aria-label="Direct link to Step 3:" title="Direct link to Step 3:">​</a></h4><p>We will copy DB, min.io (File and ADO storage as files) and Drupal&#x27;s private (temporary files, caches) folders to its new place:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> -rpv persistent/db </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/archipelago-deployment-live/data_storage/db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> -rpv persistent/solrcore </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/archipelago-deployment-live/data_storage/solrcore</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> -rpv persistent/miniodata </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/archipelago-deployment-live/data_storage/minio-data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> -rpv private </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/archipelago-deployment-live/drupal/private</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Running <code>-rpv</code> will copy verbosely and recursively while preserving original permissions.</p><p>Done!</p><p>You can now start <code>docker-compose</code> again:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> up -d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-web">The Web<a href="#the-web" class="hash-link" aria-label="Direct link to The Web" title="Direct link to The Web">​</a></h2><p>Collapsing again a few folders to aid in readability, we can now focus on your actual Drupal/Archipelago Code/Web and settings. To be honest (we are), you can easily reinstall and restore all this via <code>composer</code>, but we can also move folders as a learning experience/time and bandwidth experience. Marked with a <code>*</code> are matching folders you want to copy over:</p><table><tr><th>archipelago-deployment Live</th><th>archipelago-deployment</th></tr><tr><td valign="top"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">. ├── config_storage ├── data_storage ├── deploy ├── docs └── drupal │   ├── * config * │   ├── d8content │   ├── docs │   ├── drush │   ├── patches │   ├── persistent │   ├── private │   ├── scripts │   ├── * vendor * │   ├── * web * │   └── xdebug</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></td><td valign="top"><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">. ├── * config * │   └── sync ├── d8content │   └── metadatadisplays ├── docs ├── drush │   ├── Commands │   └── sites ├── nginxconfigford8 ├── patches ├── persistent ├── private ├── scripts ├── * vendor * ├── * web *</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></td></tr></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="copying-the-web-into-the-new-structure">Copying the Web into the new Structure<a href="#copying-the-web-into-the-new-structure" class="hash-link" aria-label="Direct link to Copying the Web into the new Structure" title="Direct link to Copying the Web into the new Structure">​</a></h3><p>No need to stop Docker again. We can do this while your Archipelago is still running.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="step-1-2">Step 1:<a href="#step-1-2" class="hash-link" aria-label="Direct link to Step 1:" title="Direct link to Step 1:">​</a></h4><p>We will copy all important folders over. From your <code>archipelago-deployment</code> folder run:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> -rpv vendor </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/archipelago-deployment-live/drupal/vendor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> -rpv web </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/archipelago-deployment-live/drupal/web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> -rpv config </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/archipelago-deployment-live/drupal/config</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And also, selectively, a few files we know you are very fond of!</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> -rpv composer.json </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/archipelago-deployment-live/drupal/composer.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> -rpv composer.lock </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/archipelago-deployment-live/drupal/composer.lock</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Done!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="ssl-enviromentals-configurations-settings-and-docker">SSL, Enviromentals, Configurations, Settings and Docker<a href="#ssl-enviromentals-configurations-settings-and-docker" class="hash-link" aria-label="Direct link to SSL, Enviromentals, Configurations, Settings and Docker" title="Direct link to SSL, Enviromentals, Configurations, Settings and Docker">​</a></h2><p>We are almost done, but <code>archipelago-deployment-live</code> has a different, safer way of defining SSL Certs, credentials, and global settings for your Archipelago.
We will start first by copying settings as they are (most likely not very safe), and then we can update passwords/etc. to make your system better-prepared for the world.</p><p>To learn more about these general settings please read <a href="/archipelago-documentation-docusaurus/docs/archipelago-deployment-live-readme#step-3-setup-your-enviromental-variables-for-dockerservices">this section of the parent Documentation</a> (who likes duplicated documentation? Nobody.).
The gist here is (after reading, please do not skip) that we need to add our service definitions into a <code>.env</code> file.</p><p>Coming from <code>archipelago-deployment</code> means and assumes that you are running AWS Linux 2 using the suggested locations in this document, that you have a vanilla deployment, and that you followed <a href="https://github.com/esmero/archipelago-deployment/blob/1.0.0-RC2/archipelago-deployment-ubuntu.md" target="_blank" rel="noopener noreferrer">these instructions</a>) so your values for <code>$HOME/archipelago-deployment-live/deploy/ec2-docker/.env</code> will be the following:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">ARCHIPELAGO_ROOT</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/home/ec2-user/archipelago-deployment-live</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">ARCHIPELAGO_EMAIL</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">your@validemail.org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">ARCHIPELAGO_DOMAIN</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">your.domain.org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">MINIO_ACCESS_KEY</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">minio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">MINIO_SECRET_KEY</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">minio123</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">MYSQL_ROOT_PASSWORD</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">esmero-db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">MINIO_BUCKET_MEDIA</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">archipelago</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">MINIO_FOLDER_PREFIX_MEDIA</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">MINIO_BUCKET_CACHE</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">archipelago</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">MINIO_FOLDER_PREFIX_CACHE</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you plan on staying on local storage driven <code>min.io</code>, <code>MINIO_BUCKET_CACHE</code> and <code>MINIO_FOLDER_PREFIX_CACHE</code> are not going to be used. If you are planning on moving your Storage from local to cloud driven please replace with the right values, e.g. AWS IAM keys and Secrets + bucket names and prefixes (folders).
Again, refer to the <a href="/archipelago-documentation-docusaurus/docs/archipelago-deployment-live-readme#step-3-setup-your-enviromental-variables-for-dockerservices">parent Documentation</a> for setting this up.</p><p>Once you have that in place (Double-check. If something goes wrong here we can always fine-tune and fix again.), we need to decide on a new <code>docker-compose</code> file, and you may need to customize it depending on your choices and current and future needs.</p><p>If you already have an SSL certificate, and it&#x27;s provided by <code>CertBot</code> you can either copy the certs from your current system (will totally depend on your setup since <code>archipelago-deployment</code> does not provide out-of-the-box SSL Certs) to <code>$HOME/archipelago-deployment-live/data_storage/letsencrypt</code>.</p><p>A normal folder structure for that is:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── accounts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── acme-v02.api.letsencrypt.org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       └── directory</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│           └── cac9f8218ef18e4f11ec053785bbf648</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│               ├── meta.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│               ├── private_key.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│               └── regr.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── archive</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── your.domain.org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       ├── cert1.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       ├── chain1.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       ├── fullchain1.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│       └── privkey1.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── csr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── 0000_csr-certbot.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── 0001_csr-certbot.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── 0002_csr-certbot.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── 0003_csr-certbot.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── keys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── 0000_key-certbot.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── 0001_key-certbot.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── 0002_key-certbot.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── 0003_key-certbot.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── live</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── README</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── your.domain.org</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      ├── cert.pem -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/archive/your.domain.org/cert1.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      ├── chain.pem -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/archive/your.domain.org/chain1.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      ├── fullchain.pem -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/archive/your.domain.org/fullchain1.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      ├── privkey.pem -</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">/archive/your.domain.org/privkey1.pem</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│      └── README</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── renewal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── your.domain.org.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── renewal-hooks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── deploy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── post</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── pre</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Or if your SSL cert is up for renewal, you can just let Archipelago request it for you. Renewal will happen auto-magically, and you may never ever need to worry about that in the future.</p><p>Finally, let&#x27;s adapt the <code>docker-compose</code> file we need to our previous (but still current!) <code>archipelago-deployment</code> reality.</p><p>For x86/AMD, run (for ARM64/Apple M1 please check the <a href="/archipelago-documentation-docusaurus/docs/archipelago-deployment-live-readme#deployment-on-arm64v8graviton-apple-m1-system">parent Documentation</a>):</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">cp</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$home</span><span class="token plain">/archipelago-deployment-live/deploy/ec2-docker/docker-compose-aws-s3.yml </span><span class="token variable" style="color:#36acaa">$home</span><span class="token plain">/archipelago-deployment-live/deploy/ec2-docker/docker-compose.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">nano</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$home</span><span class="token plain">/archipelago-deployment-live/deploy/ec2-docker/docker-compose.yml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And replace the content with this slightly modified version. Note: we really only changed the lines after this comment: <code># THIS DIFFERS FROM THE NORMAL ONE...</code>.</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Run docker-compose up -d</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">version: </span><span class="token string" style="color:#e3116c">&#x27;3.5&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">services:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  web:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container_name: esmero-web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: staticfloat/nginx-certbot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    restart: always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      CERTBOT_EMAIL: </span><span class="token variable" style="color:#36acaa">${ARCHIPELAGO_EMAIL}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ENVSUBST_VARS: FQDN</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      FQDN: </span><span class="token variable" style="color:#36acaa">${ARCHIPELAGO_DOMAIN}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token string" style="color:#e3116c">&quot;80:80&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token string" style="color:#e3116c">&quot;443:443&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token variable" style="color:#36acaa">${ARCHIPELAGO_ROOT}</span><span class="token plain">/config_storage/nginxconfig/conf.d:/etc/nginx/user.conf.d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token variable" style="color:#36acaa">${ARCHIPELAGO_ROOT}</span><span class="token plain">/config_storage/nginxconfig/certbot_extra_domains:/etc/nginx/certbot/extra_domains:ro</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token variable" style="color:#36acaa">${ARCHIPELAGO_ROOT}</span><span class="token plain">/drupal:/var/www/html:cached</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token variable" style="color:#36acaa">${ARCHIPELAGO_ROOT}</span><span class="token plain">/data_storage/ngnixcache:/var/cache/nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token variable" style="color:#36acaa">${ARCHIPELAGO_ROOT}</span><span class="token plain">/data_storage/letsencrypt:/etc/letsencrypt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    depends_on:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - solr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tty: </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - host-net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - esmero-net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  php:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container_name: esmero-php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    restart: always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: </span><span class="token string" style="color:#e3116c">&quot;esmero/php-7.4-fpm:1.0.0-RC2-multiarch&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tty: </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - host-net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - esmero-net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token variable" style="color:#36acaa">${ARCHIPELAGO_ROOT}</span><span class="token plain">/config_storage/php-fpm/www.conf:/usr/local/etc/php-fpm.d/www.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token variable" style="color:#36acaa">${ARCHIPELAGO_ROOT}</span><span class="token plain">/drupal:/var/www/html:cached</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      MINIO_ACCESS_KEY: </span><span class="token variable" style="color:#36acaa">${MINIO_ACCESS_KEY}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      MINIO_SECRET_KEY: </span><span class="token variable" style="color:#36acaa">${MINIO_SECRET_KEY}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      MYSQL_ROOT_PASSWORD: </span><span class="token variable" style="color:#36acaa">${MYSQL_ROOT_PASSWORD}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      MINIO_BUCKET_MEDIA: </span><span class="token variable" style="color:#36acaa">${MINIO_BUCKET_MEDIA}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      MINIO_FOLDER_PREFIX_MEDIA: </span><span class="token variable" style="color:#36acaa">${MINIO_FOLDER_PREFIX_MEDIA}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  solr:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container_name: esmero-solr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    restart: always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: </span><span class="token string" style="color:#e3116c">&quot;solr:8.8.2&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tty: </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token string" style="color:#e3116c">&quot;8983:8983&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - host-net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - esmero-net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token variable" style="color:#36acaa">${ARCHIPELAGO_ROOT}</span><span class="token plain">/data_storage/solrcore:/var/solr/data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token variable" style="color:#36acaa">${ARCHIPELAGO_ROOT}</span><span class="token plain">/config_storage/solrconfig:/drupalconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token variable" style="color:#36acaa">${ARCHIPELAGO_ROOT}</span><span class="token plain">/data_storage/solrlib:/opt/solr/contrib/archipelago/lib</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    entrypoint:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - docker-entrypoint.sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - solr-precreate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - drupal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - /drupalconfig</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  db:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: mysql:8.0.22</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    command: mysqld --default-authentication-plugin</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mysql_native_password  --max_allowed_packet</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">256M</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container_name: esmero-db</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    restart: always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      MYSQL_ROOT_PASSWORD: </span><span class="token variable" style="color:#36acaa">${MYSQL_ROOT_PASSWORD}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - host-net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - esmero-net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token variable" style="color:#36acaa">${ARCHIPELAGO_ROOT}</span><span class="token plain">/data_storage/db:/var/lib/mysql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nlp:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container_name: esmero-nlp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    restart: always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: </span><span class="token string" style="color:#e3116c">&quot;esmero/esmero-nlp:1.0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token string" style="color:#e3116c">&quot;6400:6400&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - host-net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - esmero-net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  iiif:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container_name: esmero-cantaloupe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: </span><span class="token string" style="color:#e3116c">&quot;esmero/cantaloupe-s3:4.1.9RC&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    restart: always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token string" style="color:#e3116c">&quot;8183:8182&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - host-net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - esmero-net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      AWS_ACCESS_KEY_ID: </span><span class="token variable" style="color:#36acaa">${MINIO_ACCESS_KEY}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      AWS_SECRET_ACCESS_KEY: </span><span class="token variable" style="color:#36acaa">${MINIO_SECRET_KEY}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># THIS DIFFERS FROM THE STANDARD ONE AND ENABLES LOCAL FILESYSTEM CACHE INSTEAD OF AWS S3 one</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      CACHE_SERVER_DERIVATIVE: FilesystemCache</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      S3SOURCE_BASICLOOKUPSTRATEGY_BUCKET_NAME: </span><span class="token variable" style="color:#36acaa">${MINIO_BUCKET_MEDIA}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      S3SOURCE_BASICLOOKUPSTRATEGY_PATH_PREFIX: </span><span class="token variable" style="color:#36acaa">${MINIO_FOLDER_PREFIX_MEDIA}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      S3CACHE_BUCKET_NAME: </span><span class="token variable" style="color:#36acaa">${MINIO_BUCKET_CACHE}</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      S3CACHE_OBJECT_KEY_PREFIX: </span><span class="token variable" style="color:#36acaa">${MINIO_FOLDER_PREFIX_CACHE}</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      XMS: 2g</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      XMX: 4g</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token variable" style="color:#36acaa">${ARCHIPELAGO_ROOT}</span><span class="token plain">/config_storage/iiifconfig:/etc/cantaloupe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token variable" style="color:#36acaa">${ARCHIPELAGO_ROOT}</span><span class="token plain">/data_storage/iiifcache:/var/cache/cantaloupe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token variable" style="color:#36acaa">${ARCHIPELAGO_ROOT}</span><span class="token plain">/data_storage/iiiftmp:/var/cache/cantaloupe_tmp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  minio:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container_name: esmero-minio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    restart: always</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    image: minio/minio:latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    volumes:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token variable" style="color:#36acaa">${ARCHIPELAGO_ROOT}</span><span class="token plain">/data_storage/minio-data:/data:cached</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ports:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token string" style="color:#e3116c">&quot;9000:9000&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - </span><span class="token string" style="color:#e3116c">&quot;9001:9001&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - host-net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      - esmero-net</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    environment:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      MINIO_HTTP_TRACE: /tmp/minio-log.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      MINIO_ROOT_USER: </span><span class="token variable" style="color:#36acaa">${MINIO_ACCESS_KEY}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      MINIO_ROOT_PASSWORD: </span><span class="token variable" style="color:#36acaa">${MINIO_SECRET_KEY}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      MINIO_ACCESS_KEY: </span><span class="token variable" style="color:#36acaa">${MINIO_ACCESS_KEY}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      MINIO_SECRET_KEY: </span><span class="token variable" style="color:#36acaa">${MINIO_SECRET_KEY}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># THIS DIFFERS FROM THE STANDARD ONE AND ENABLES LOCAL MINIO INSTEAD OF AWS S3 one </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    command: server /data --console-address </span><span class="token string" style="color:#e3116c">&quot;:9001&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">networks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  host-net:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    driver: bridge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  esmero-net:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    driver: bridge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    internal: </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Press CNTRL-X, and you are done.
Now the final test!!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="shutdown-the-old-one-start-the-new-one">Shutdown the old one, start the new one<a href="#shutdown-the-old-one-start-the-new-one" class="hash-link" aria-label="Direct link to Shutdown the old one, start the new one" title="Direct link to Shutdown the old one, start the new one">​</a></h2><p>So we are ready. Testing may be a hit-or-miss thing here. Did we cover all the steps? Did a command fail? The good thing is that we can start the new ensemble, and all our old ones will survive. And we can come back over and over until we are ready. Let&#x27;s try!</p><p>We will start by shutting down the running Docker ensemble:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> </span><span class="token environment constant" style="color:#36acaa">$HOME</span><span class="token plain">/archipelago-deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> down</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now let&#x27;s go to our new deployment. Docker starts here in a different folder:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">cd</span><span class="token plain"> </span><span class="token environment constant" style="color:#36acaa">$HOME</span><span class="token plain">/archipelago-deployment-live/deploy/ec2-docker</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">docker-compose</span><span class="token plain"> up</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You may notice that we removed the <code>-d</code>. Why? We want to see all the messages and notice/mark/copy any errors, e.g. did the SSL CERT load correctly? Did the MYSQL import work out?
To avoid shutting it down while all starts, please open another Terminal and type:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">docker</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ps</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And look at the up-times. Do you see any Containers restarting (where Created and the Status differ for a lot and Status keeps resetting to 0?)? A healthy deployment will look similar to this:</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CONTAINER ID   IMAGE                                    COMMAND                  CREATED          STATUS         PORTS                                      NAMES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">f794c25db64c   esmero/cantaloupe-s3:4.1.9RC2-arm64      </span><span class="token string" style="color:#e3116c">&quot;sh -c &#x27;java -Dcanta…&quot;</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"> seconds ago    Up </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> seconds   </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.0.0:8183-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">8182</span><span class="token plain">/tcp                     esmero-cantaloupe</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5b791445720f   jonasal/nginx-certbot                    </span><span class="token string" style="color:#e3116c">&quot;/docker-entrypoint.…&quot;</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"> seconds ago    Up </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> seconds   </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.0.0:80-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">80</span><span class="token plain">/tcp, </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.0.0:443-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">443</span><span class="token plain">/tcp   esmero-web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">e38fbbd86edf   esmero/esmero-nlp:1.0.1-RC2-arm64        </span><span class="token string" style="color:#e3116c">&quot;/usr/local/bin/entr…&quot;</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">11</span><span class="token plain"> seconds ago   Up </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"> seconds   </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.0.0:6400-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">6400</span><span class="token plain">/tcp                     esmero-nlp</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c84a0a4d43e9   minio/minio:latest                       </span><span class="token string" style="color:#e3116c">&quot;/usr/bin/docker-ent…&quot;</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">11</span><span class="token plain"> seconds ago   Up </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"> seconds   </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.0.0:9000-9001-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">9000</span><span class="token plain">-9001/tcp           esmero-minio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3ec176a960c3   esmero/php-7.4-fpm:1.0.0-RC2-multiarch   </span><span class="token string" style="color:#e3116c">&quot;docker-php-entrypoi…&quot;</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">11</span><span class="token plain"> seconds ago   Up </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"> seconds   </span><span class="token number" style="color:#36acaa">9000</span><span class="token plain">/tcp                                   esmero-php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">e762ad7ea5e2   solr:8.8.2                               </span><span class="token string" style="color:#e3116c">&quot;docker-entrypoint.s…&quot;</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">11</span><span class="token plain"> seconds ago   Up </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"> seconds   </span><span class="token number" style="color:#36acaa">0.0</span><span class="token plain">.0.0:8983-</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">8983</span><span class="token plain">/tcp                     esmero-solr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">381166d61f8c   mariadb:10.5.10-focal                    </span><span class="token string" style="color:#e3116c">&quot;docker-entrypoint.s…&quot;</span><span class="token plain">   </span><span class="token number" style="color:#36acaa">11</span><span class="token plain"> seconds ago   Up </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"> seconds   </span><span class="token number" style="color:#36acaa">3306</span><span class="token plain">/tcp      </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you feel that all seems to be fine, open a browser window and visit your website. See if you can log in and see ADOs.
If not you can momentarily shut down this new Docker ensemble and restart the older one. Nothing is lost!
Then with time and tea/coffee and fresh eyes come back and re-trace your steps. 95% of the issues are incorrect values in the <code>.env</code> file. The other 5% may be on us.
If you run into any trouble please get in touch!</p><p>Happy deploying!</p><hr><p>Thank you for reading! Please contact us on our <a href="https://groups.google.com/forum/#!forum/archipelago-commons" target="_blank" rel="noopener noreferrer">Archipelago Commons Google Group</a> with any questions or feedback, or open an ISSUE in this <a href="https://github.com/esmero/archipelago-deployment-live/" target="_blank" rel="noopener noreferrer">Archipelago Deployment Live Repository</a>.</p><p>Return to <a href="/archipelago-documentation-docusaurus/docs/archipelago-deployment-live-readme">Archipelago Live Deployment</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-tags-row row margin-bottom--sm"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/archipelago-documentation-docusaurus/docs/tags/archipelago-deployment">Archipelago-deployment</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/archipelago-documentation-docusaurus/docs/tags/archipelago-deployment-live">Archipelago-deployment-live</a></li></ul></div></div><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://pr.new/github.com/WWU-MaxBronsema/archipelago-documentation-docusaurus/docs/archipelago-deployment-live-moveToLive.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/archipelago-documentation-docusaurus/docs/archipelago-deployment-live-gitworkflow"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Managing, sheltering, pruning, and nurturing your own custom Archipelago</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/archipelago-documentation-docusaurus/docs/archipelago-deployment-live-readme"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Archipelago-deployment-live</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-this-documentation-for" class="table-of-contents__link toc-highlight">What is this documentation for?</a></li><li><a href="#what-is-this-documentation-not-for" class="table-of-contents__link toc-highlight">What is this documentation not for?</a></li><li><a href="#requirements" class="table-of-contents__link toc-highlight">Requirements</a></li><li><a href="#differences-between-both-deployments-strategies" class="table-of-contents__link toc-highlight">Differences between both deployments strategies.</a></li><li><a href="#commonalities-between-both-deployment-strategies" class="table-of-contents__link toc-highlight">Commonalities between both deployment strategies.</a></li><li><a href="#getting-the-new-repo-in-place" class="table-of-contents__link toc-highlight">Getting the new repo in place</a></li><li><a href="#backing-up" class="table-of-contents__link toc-highlight">Backing up</a><ul><li><a href="#step-1" class="table-of-contents__link toc-highlight">Step 1:</a></li><li><a href="#step-2" class="table-of-contents__link toc-highlight">Step 2:</a></li><li><a href="#step-3" class="table-of-contents__link toc-highlight">Step 3:</a></li></ul></li><li><a href="#the-directory-structures" class="table-of-contents__link toc-highlight">The directory structures</a></li><li><a href="#the-data" class="table-of-contents__link toc-highlight">The Data</a><ul><li><a href="#copying-the-data-into-the-new-structure" class="table-of-contents__link toc-highlight">Copying the Data into the new Structure</a></li></ul></li><li><a href="#the-web" class="table-of-contents__link toc-highlight">The Web</a><ul><li><a href="#copying-the-web-into-the-new-structure" class="table-of-contents__link toc-highlight">Copying the Web into the new Structure</a></li></ul></li><li><a href="#ssl-enviromentals-configurations-settings-and-docker" class="table-of-contents__link toc-highlight">SSL, Enviromentals, Configurations, Settings and Docker</a></li><li><a href="#shutdown-the-old-one-start-the-new-one" class="table-of-contents__link toc-highlight">Shutdown the old one, start the new one</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/archipelago-documentation-docusaurus/docs/">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/archipelago-documentation-docusaurus/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/archipelago-documentation-docusaurus/assets/js/runtime~main.3a9b1af4.js"></script>
<script src="/archipelago-documentation-docusaurus/assets/js/main.df94142f.js"></script>
</body>
</html>