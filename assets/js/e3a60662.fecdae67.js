"use strict";(self.webpackChunkarchipelago_documentation_docsaurus=self.webpackChunkarchipelago_documentation_docsaurus||[]).push([[9304],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>h});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},d=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,l=e.originalType,p=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),u=s(a),m=o,h=u["".concat(p,".").concat(m)]||u[m]||c[m]||l;return a?n.createElement(h,r(r({ref:t},d),{},{components:a})):n.createElement(h,r({ref:t},d))}));function h(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var l=a.length,r=new Array(l);r[0]=m;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i[u]="string"==typeof e?e:o,r[1]=i;for(var s=2;s<l;s++)r[s]=a[s];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},3031:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>r,default:()=>c,frontMatter:()=>l,metadata:()=>i,toc:()=>s});var n=a(7462),o=(a(7294),a(3905));const l={title:"Archipelago-deployment: upgrading Drupal 8 to Drupal 9 (1.0.0-RC2 to 1.0.0-RC3)",tags:["Archipelago-deployment","Drupal 8","Drupal 9"]},r="Archipelago-deployment: upgrading Drupal 8 to Drupal 9 (1.0.0-RC2 to 1.0.0-RC3)",i={unversionedId:"archipelago-deployment-upgradeFromD8ToD9",id:"archipelago-deployment-upgradeFromD8ToD9",title:"Archipelago-deployment: upgrading Drupal 8 to Drupal 9 (1.0.0-RC2 to 1.0.0-RC3)",description:"What is this documentation for?",source:"@site/docs/archipelago-deployment-upgradeFromD8ToD9.md",sourceDirName:".",slug:"/archipelago-deployment-upgradeFromD8ToD9",permalink:"/archipelago-documentation-docusaurus/docs/archipelago-deployment-upgradeFromD8ToD9",draft:!1,editUrl:"https://pr.new/github.com/WWU-MaxBronsema/archipelago-documentation-docusaurus/docs/archipelago-deployment-upgradeFromD8ToD9.md",tags:[{label:"Archipelago-deployment",permalink:"/archipelago-documentation-docusaurus/docs/tags/archipelago-deployment"},{label:"Drupal 8",permalink:"/archipelago-documentation-docusaurus/docs/tags/drupal-8"},{label:"Drupal 9",permalink:"/archipelago-documentation-docusaurus/docs/tags/drupal-9"}],version:"current",frontMatter:{title:"Archipelago-deployment: upgrading Drupal 8 to Drupal 9 (1.0.0-RC2 to 1.0.0-RC3)",tags:["Archipelago-deployment","Drupal 8","Drupal 9"]},sidebar:"tutorialSidebar",previous:{title:"Installing Archipelago Drupal 9 on Ubuntu 18.04 or 20.04",permalink:"/archipelago-documentation-docusaurus/docs/archipelago-deployment-ubuntu"},next:{title:"Archipelago-deployment: upgrading to 1.0.0 (1.0.0-RC3 to 1.0.0)",permalink:"/archipelago-documentation-docusaurus/docs/archipelago-deployment-upgradeFromRC3"}},p={},s=[{value:"What is this documentation for?",id:"what-is-this-documentation-for",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Backing up and preparing for the upgrade",id:"backing-up-and-preparing-for-the-upgrade",level:2},{value:"Step 1:",id:"step-1",level:3},{value:"Step 2:",id:"step-2",level:3},{value:"Step 3:",id:"step-3",level:3},{value:"Step 4:",id:"step-4",level:3},{value:"Step 5:",id:"step-5",level:3},{value:"Upgrading to 1.0.0-RC3",id:"upgrading-to-100-rc3",level:2},{value:"Step 1:",id:"step-1-1",level:3},{value:"Step 2:",id:"step-2-1",level:3},{value:"Step 3:",id:"step-3-1",level:3},{value:"What if all is not OK, and I see red and a lot of dependency explanations?",id:"what-if-all-is-not-ok-and-i-see-red-and-a-lot-of-dependency-explanations",level:4},{value:"Step 4:",id:"step-4-1",level:3},{value:"Step 5:",id:"step-5-1",level:3},{value:"Step 6:",id:"step-6",level:3},{value:"A Partial Sync, which will bring new configs and update existing ones but will <strong>not</strong> remove ones that only exist in your custom setup, e.g. new Webforms or View Modes.",id:"a-partial-sync-which-will-bring-new-configs-and-update-existing-ones-but-will-not-remove-ones-that-only-exist-in-your-custom-setup-eg-new-webforms-or-view-modes",level:4},{value:"A Complete Sync, which will bring new things and update existing but will also remove all the ones that are not part of RC3. It&#39;s a like clean factory reset.",id:"a-complete-sync-which-will-bring-new-things-and-update-existing-but-will-also-remove-all-the-ones-that-are-not-part-of-rc3-its-a-like-clean-factory-reset",level:4},{value:"Step 7: Update (or not) your Metadata Display Entities and Menu items.",id:"step-7-update-or-not-your-metadata-display-entities-and-menu-items",level:3},{value:"Need help? Blue Screen? Missed a step? Need a hug and such?",id:"need-help-blue-screen-missed-a-step-need-a-hug-and-such",level:3},{value:"Caring &amp; Coding + Fixing + Testing",id:"caring--coding--fixing--testing",level:2},{value:"License",id:"license",level:2}],d={toc:s},u="wrapper";function c(e){let{components:t,...a}=e;return(0,o.kt)(u,(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"archipelago-deployment-upgrading-drupal-8-to-drupal-9-100-rc2-to-100-rc3"},"Archipelago-deployment: upgrading Drupal 8 to Drupal 9 (1.0.0-RC2 to 1.0.0-RC3)"),(0,o.kt)("h2",{id:"what-is-this-documentation-for"},"What is this documentation for?"),(0,o.kt)("p",null,"If you already have a well-set-up and well-loved Archipelago (1.0.0-RC2) running Drupal 8 (D8), this documentation will allow you to update to 1.0.0-RC3 on Drupal 9 (D9) without any major issues."),(0,o.kt)("p",null,"D8 is no longer supported as of the end of November 2021. D9 has been around for a little while, and even if every module is not supported yet, what you need and want for ",(0,o.kt)("strong",{parentName:"p"},"Archipelago")," has long been ready for D9. However, Archipelago is still D8 compatible if it's necessary for you to stay back a little longer."),(0,o.kt)("h2",{id:"requirements"},"Requirements"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"An ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/esmero/archipelago-deployment"},"archipelago-deployment")," local instance 1.0.0-RC2 (working, tested) deployed using provided instructions via Docker and running Drupal 8."),(0,o.kt)("li",{parentName:"ul"},"Basic knowledge and instincts (+ courage) on how to run Terminal Commands, ",(0,o.kt)("inlineCode",{parentName:"li"},"composer")," and ",(0,o.kt)("inlineCode",{parentName:"li"},"drush"),"."),(0,o.kt)("li",{parentName:"ul"},"Patience. You can't skip steps here."),(0,o.kt)("li",{parentName:"ul"},"For shell Commands documented here please copy line by line\u2014not the whole block.")),(0,o.kt)("h2",{id:"backing-up-and-preparing-for-the-upgrade"},"Backing up and preparing for the upgrade"),(0,o.kt)("p",null,"Backups are always going to be your best friends. Archipelago's code, database, and settings are mostly self-contained in your current ",(0,o.kt)("inlineCode",{parentName:"p"},"archipelago-deployment")," repo folder, and backing up is simple because of that."),(0,o.kt)("h3",{id:"step-1"},"Step 1:"),(0,o.kt)("p",null,"On a terminal, ",(0,o.kt)("inlineCode",{parentName:"p"},"cd")," into your running ",(0,o.kt)("inlineCode",{parentName:"p"},"archipelago-deployment")," folder and shut down your ",(0,o.kt)("inlineCode",{parentName:"p"},"docker-compose")," ensemble by running the following:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker-compose down\n")),(0,o.kt)("h3",{id:"step-2"},"Step 2:"),(0,o.kt)("p",null,"Verify that all containers are actually down. The following command should return an empty listing:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker ps\n")),(0,o.kt)("p",null,"If anything is still running, wait a little longer and run the command again."),(0,o.kt)("h3",{id:"step-3"},"Step 3:"),(0,o.kt)("p",null,"Now let's ",(0,o.kt)("inlineCode",{parentName:"p"},"tar.gz")," the whole ensemble with data and configs. As an example we will save this into your ",(0,o.kt)("inlineCode",{parentName:"p"},"$HOME")," folder.\nAs a good practice we append the ",(0,o.kt)("strong",{parentName:"p"},"current date "),"(YEAR-MONTH-DAY) to the filename. Here we assume today is December 1st of 2021."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"cd ..\nsudo tar -czvpf $HOME/archipelago-deployment-RC2-20211201.tar.gz archipelago-deployment\ncd archipelago-deployment\n")),(0,o.kt)("p",null,"The process may take a few minutes. Now let's verify that all is there and that the ",(0,o.kt)("inlineCode",{parentName:"p"},"tar.gz")," is not corrupt."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"tar -tvvf $HOME/archipelago-deployment-RC2-20211201.tar.gz \n")),(0,o.kt)("p",null,"You will see a listing of files, and at the end you will see something like this: ",(0,o.kt)("inlineCode",{parentName:"p"},"Archive Format: POSIX pax interchange format, Compression: gzip"),". If corrupt (Do you have enough space? Did your ssh connection drop?) you will see the following:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"tar: Unrecognized archive format\n")),(0,o.kt)("h3",{id:"step-4"},"Step 4:"),(0,o.kt)("p",null,"Restart your ",(0,o.kt)("inlineCode",{parentName:"p"},"docker-compose")," ensemble, and wait a little while for all to start."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker-compose up -d\n")),(0,o.kt)("h3",{id:"step-5"},"Step 5:"),(0,o.kt)("p",null,"Export/backup all of your live Archipelago configurations (this allows you to compare/come back in case you lose something custom during the upgrade)."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker exec esmero-php mkdir config/backup\ndocker exec esmero-php drush cex --destination=/var/www/html/config/backup\n")),(0,o.kt)("p",null,"Good. Now it's safe to begin the upgrade."),(0,o.kt)("hr",null),(0,o.kt)("h2",{id:"upgrading-to-100-rc3"},"Upgrading to 1.0.0-RC3"),(0,o.kt)("h3",{id:"step-1-1"},"Step 1:"),(0,o.kt)("p",null,"First we are going to disable modules that are not part of 1.0.0-RC3 or are not yet compatible with D9. Run the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker exec esmero-php drush pm-uninstall module_missing_message_fixer markdown webprofiler key_value webform_views\n")),(0,o.kt)("p",null,"From inside your ",(0,o.kt)("inlineCode",{parentName:"p"},"archipelago-deployment")," repo folder we are now going to open up file ",(0,o.kt)("inlineCode",{parentName:"p"},"permissionss")," for some of your most protected Drupal files."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"sudo chmod 777 web/sites/default\nsudo chmod 666 web/sites/default/*settings.php\nsudo chmod 666 web/sites/default/*services.yml\n")),(0,o.kt)("h3",{id:"step-2-1"},"Step 2:"),(0,o.kt)("p",null,"Time to fetch the ",(0,o.kt)("inlineCode",{parentName:"p"},"1.0.0-RC3")," branch and update our ",(0,o.kt)("inlineCode",{parentName:"p"},"docker-compose")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"composer")," dependencies. We are also going to stop the current ",(0,o.kt)("inlineCode",{parentName:"p"},"docker")," ensemble to update all containers to newer versions:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker-compose down\ngit checkout 1.0.0-RC3 \n")),(0,o.kt)("p",null,"Then copy the appropriate ",(0,o.kt)("inlineCode",{parentName:"p"},"docker-compose")," file for your architecture:"),(0,o.kt)("p",null,'??? info "OSX (macOS)/x86-64"'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"```shell\ncp docker-compose-osx.yml docker-compose.yml\n```\n")),(0,o.kt)("p",null,'??? info "Linux/x86-64/AMD64"'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"```shell\ncp docker-compose-linux.yml docker-compose.yml\n```\n")),(0,o.kt)("p",null,'??? info "OSX (macOS)/Linux/ARM64"'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"```shell\ncp docker-compose-arm64.yml docker-compose.yml\n```\n")),(0,o.kt)("p",null,"Finally, pull the images, and bring up the ensemble:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker compose pull \ndocker compose up -d\n")),(0,o.kt)("p",null,"Give all a little time to start. The latest ",(0,o.kt)("inlineCode",{parentName:"p"},"min.io")," adds a new console, and your ",(0,o.kt)("inlineCode",{parentName:"p"},"Solr")," core and ",(0,o.kt)("inlineCode",{parentName:"p"},"Database")," need to be upgraded. Please be patient. To ensure all is well, run (more than once if necessary) the following:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker ps\n")),(0,o.kt)("p",null,"You should see something like this: "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'CONTAINER ID   IMAGE                                    COMMAND                  CREATED          STATUS          PORTS                                                           NAMES\n867fd2a42134   nginx                                    "/docker-entrypoint.\u2026"   32 seconds ago   Up 27 seconds   0.0.0.0:8001->80/tcp, :::8001->80/tcp                           esmero-web\n8663e84a9b48   solr:8.8.2                               "docker-entrypoint.s\u2026"   33 seconds ago   Up 30 seconds   0.0.0.0:8983->8983/tcp, :::8983->8983/tcp                       esmero-solr\n9b580fa0088f   minio/minio:latest                       "/usr/bin/docker-ent\u2026"   33 seconds ago   Up 28 seconds   0.0.0.0:9000-9001->9000-9001/tcp, :::9000-9001->9000-9001/tcp   esmero-minio\n50e2f41c7b60   esmero/esmero-nlp:1.0                    "/usr/local/bin/entr\u2026"   33 seconds ago   Up 30 seconds   0.0.0.0:6400->6400/tcp, :::6400->6400/tcp                       esmero-nlp\n300810fd6f03   esmero/cantaloupe-s3:4.1.9RC             "sh -c \'java -Dcanta\u2026"   33 seconds ago   Up 30 seconds   0.0.0.0:8183->8182/tcp, :::8183->8182/tcp                       esmero-cantaloupe\n248e4638ba2a   mysql:8.0.22                             "docker-entrypoint.s\u2026"   33 seconds ago   Up 28 seconds   3306/tcp, 33060/tcp                                             esmero-db\n141ace919344   esmero/php-7.4-fpm:1.0.0-RC2-multiarch   "docker-php-entrypoi\u2026"   33 seconds ago   Up 28 seconds   9000/tcp                                                        esmero-php\n')),(0,o.kt)("p",null,"Important here is the ",(0,o.kt)("inlineCode",{parentName:"p"},"STATUS")," column. It ",(0,o.kt)("strong",{parentName:"p"},"needs")," to be a number that goes up in time every time you run ",(0,o.kt)("inlineCode",{parentName:"p"},"docker ps")," again (and again)."),(0,o.kt)("h3",{id:"step-3-1"},"Step 3:"),(0,o.kt)("p",null,"Now we are going to tell ",(0,o.kt)("inlineCode",{parentName:"p"},"composer")," to actually fetch the new code and dependencies using the 1.0.0-RC3 provided ",(0,o.kt)("inlineCode",{parentName:"p"},"composer.lock")," and update the whole Drupal/PHP/JS environment."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'docker exec -ti esmero-php bash -c "composer install"\n')),(0,o.kt)("p",null,"This will fail (sorry!) for a few packages but no worries, they need to be patched and composer is not that smart so simply run it again:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'docker exec -ti esmero-php bash -c "composer install"\n')),(0,o.kt)("p",null,"Well done! If you see ",(0,o.kt)("strong",{parentName:"p"},"no")," issues and all ends in a ",(0,o.kt)("strong",{parentName:"p"},"Green colored message")," all is good!  ",(0,o.kt)("a",{parentName:"p",href:"#step-4_1"},"Jump to Step 4")),(0,o.kt)("h4",{id:"what-if-all-is-not-ok-and-i-see-red-and-a-lot-of-dependency-explanations"},"What if all is not OK, and I see red and a lot of dependency explanations?"),(0,o.kt)("p",null,"If you have manually installed packages via composer in the past that are NO longer Drupal 9 compatible you may see errors.\nIn that case you need to check each package website's (normally ",(0,o.kt)("a",{parentName:"p",href:"https://www.drupal.org/project/the_module_name"},"https://www.drupal.org/project/the_module_name"),") and check if there is a Drupal 9 compatible version. "),(0,o.kt)("p",null,"If so run:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker exec -ti esmero-php bash -c \"composer require 'drupal/the_module_name:^VERSION_NUMBER_THAT_WORKS_ON_DRUPAL9_' --update-with-dependencies --no-update\" and run **Step 3 ** again (and again until all is cleared)\n")),(0,o.kt)("p",null,"If not, try to find a replacement module that does something similar, but in any case you may end up having to remove before proceding. Give us a ping/slack/google group/open a github ISSUE if you find yourself uncertain about this. "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'docker exec -ti esmero-php bash -c "composer remove drupal/the_module_name --no-update"\ndocker exec -ti esmero-php bash -c "drush pm-uninstall the_module_name"\n')),(0,o.kt)("h3",{id:"step-4-1"},"Step 4:"),(0,o.kt)("p",null,"We will now ask Drupal to update some internal configs and databases. The following commands are part of the ",(0,o.kt)("a",{parentName:"p",href:"../#starting-from-zero"},"from ZERO")," deployment. They will bring you up to date with RC3 settings and D9 particularities."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker exec -ti esmero-php bash -c 'scripts/archipelago/setup.sh'\ndocker exec -ti esmero-php bash -c 'drush urol administrator \"admin\"'\ndocker exec -ti esmero-php bash -c \"drush updatedb\"\n")),(0,o.kt)("h3",{id:"step-5-1"},"Step 5:"),(0,o.kt)("p",null,'Previously D8 installations had a "module/profile" driven installation. Those are no longer used or even exist as part of core, but a profile can\'t be changed once installed so you have to do the following to avoid Drupal complaining about our new and simpler way of doing things (a small roll back):'),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker exec -ti esmero-php bash -c \"sed -i 's/minimal: 1000/standard: 1000/g' config/sync/core.extension.yml\"\ndocker exec -ti esmero-php bash -c \"sed -i 's/profile: minimal/profile: standard/g' config/sync/core.extension.yml\"\n")),(0,o.kt)("h3",{id:"step-6"},"Step 6:"),(0,o.kt)("p",null,"Now you can sync your new Archipelago 1.0.0-RC3 and bring all the new configs and settings in. For this you have ",(0,o.kt)("strong",{parentName:"p"},"two")," options (no worries, remember you made a backup!):"),(0,o.kt)("h4",{id:"a-partial-sync-which-will-bring-new-configs-and-update-existing-ones-but-will-not-remove-ones-that-only-exist-in-your-custom-setup-eg-new-webforms-or-view-modes"},"A Partial Sync, which will bring new configs and update existing ones but will ",(0,o.kt)("strong",{parentName:"h4"},"not")," remove ones that only exist in your custom setup, e.g. new Webforms or View Modes."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker exec esmero-php drush cim -y --partial   \n")),(0,o.kt)("h4",{id:"a-complete-sync-which-will-bring-new-things-and-update-existing-but-will-also-remove-all-the-ones-that-are-not-part-of-rc3-its-a-like-clean-factory-reset"},"A Complete Sync, which will bring new things and update existing but will also remove all the ones that are not part of RC3. It's a like clean factory reset."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker exec esmero-php drush cim -y \n")),(0,o.kt)("p",null,"If all goes well here and you see no errors it's time to reindex ",(0,o.kt)("inlineCode",{parentName:"p"},"Solr")," because there are new Fields. Run the following:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker exec esmero-php drush search-api-reindex\ndocker exec esmero-php drush search-api-index\n")),(0,o.kt)("p",null,"You might see some warnings related to modules dealing with previously non-existent data\u2014no worries, just ignore those."),(0,o.kt)("p",null,"If you made it this far you are done with code/devops (are we ever ready?), and that means you should be able to (hopefully) stay in the Drupal 9 realm for a few years!"),(0,o.kt)("h3",{id:"step-7-update-or-not-your-metadata-display-entities-and-menu-items"},"Step 7: Update (or not) your Metadata Display Entities and Menu items."),(0,o.kt)("p",null,"Recommended: If you want to add new templates and menu items 1.0.0-RC3 provides, run this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker exec -ti esmero-php bash -c 'scripts/archipelago/deploy.sh'\n")),(0,o.kt)("p",null,"Once that is done, you can choose to update all Metadata Displays (twig templates) we ship with new 1.0.0-RC3 versions (heavily fixed IIIF manifest, Markdown to HTML for Metadata, better Object descriptions). But before you do this, we ",(0,o.kt)("strong",{parentName:"p"},"really")," recommend that you first make sure to manually (copy/paste) back up any Twig templates you have modified. If unsure, do not run the command that comes after this warning! You can always manually copy the new templates from the ",(0,o.kt)("inlineCode",{parentName:"p"},"d8content/metadatadisplays")," folder which contains text versions (again, copy/paste) of each shipped template you can pick and use when you feel ready. "),(0,o.kt)("p",null,"If you are sure (like really?) you want to overwrite the ones you modified (sure, just checking?), then you can run this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"docker exec -ti esmero-php bash -c 'scripts/archipelago/update_deployed.sh'\n")),(0,o.kt)("p",null,"Done! (For realz now) "),(0,o.kt)("p",null,"Please log into your Archipelago and test/check all is working! Enjoy 1.0.0-RC3 and Drupal 9. Thanks!"),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"need-help-blue-screen-missed-a-step-need-a-hug-and-such"},"Need help? Blue Screen? Missed a step? Need a hug and such?"),(0,o.kt)("p",null,"If you see any issues or errors or need help with a step, please let us know (ASAP!). You can either open an ",(0,o.kt)("inlineCode",{parentName:"p"},"issue")," in this repository or use the ",(0,o.kt)("a",{parentName:"p",href:"https://groups.google.com/forum/#!forum/archipelago-commons"},"Google Group"),". We are here to help."),(0,o.kt)("p",null,"If you like this, let us know!"),(0,o.kt)("h2",{id:"caring--coding--fixing--testing"},"Caring & Coding + Fixing + Testing"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/DiegoPino"},"Diego Pino")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/giancarlobi"},"Giancarlo Birello")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/alliomeria"},"Allison Lund")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/karomabiles"},"Katie Romabiles")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/aksm"},"Albert Min"))),(0,o.kt)("h2",{id:"license"},"License"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"http://www.gnu.org/licenses/gpl-3.0.txt"},"GPLv3")))}c.isMDXComponent=!0}}]);